(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{16:function(t,e,a){},17:function(t,e,a){},40:function(t,e,a){"use strict";a.r(e);var o=a(0),n=a.n(o),r=a(7),s=a.n(r),i=(a(16),a(3)),c=a(4),l=a(6),u=a(5),h=(a(17),a(9)),g=(a(18),a(1)),p=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(i.a)(this,a);for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))).state={searchQuerry:""},t.onSearchFormChange=function(e){t.setState({searchQuerry:e.currentTarget.value})},t.onSubmitForm=function(e){e.preventDefault(),""!==t.state.searchQuerry.trim()?(t.props.onSubmit(t.state.searchQuerry),t.setState({searchQuerry:""})):h.b.warn("No data entered")},t}return Object(c.a)(a,[{key:"render",value:function(){return Object(g.jsx)("header",{className:"Searchbar",children:Object(g.jsxs)("form",{className:"SearchForm",onSubmit:this.onSubmitForm,children:[Object(g.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(g.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(g.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:this.onSearchFormChange,value:this.state.searchQuerry})]})})}}]),a}(o.Component),d=p,m=a(8),b=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(i.a)(this,a);for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))).state={images:[],perPage:12,pageNumber:1,totalHits:null,loading:!1,error:!1,imgLength:null},t.pageDown=function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},t}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(t,e){var a=this;if(t.querry!==this.props.querry||e.pageNumber!==this.props.page){1===this.props.page&&(e.images=[]),this.setState({pageNumber:this.props.page}),this.setState({loading:!0,error:!1}),this.props.loading(this.state.loading);fetch("https://pixabay.com/api/?q=".concat(this.props.querry,"&page=").concat(this.state.pageNumber,"&key=").concat("23049135-63d939595882c9f020474dd76","&image_type=photo&orientation=horizontal&per_page=").concat(this.state.perPage)).then((function(t){return t.json()})).then((function(t){a.setState({images:[].concat(Object(m.a)(e.images),Object(m.a)(t.hits)),totalHits:t.totalHits,imgLength:[].concat(Object(m.a)(e.images),Object(m.a)(t.hits)).length}),console.log(t),console.log(a.state.totalHits),a.props.totalHits(a.state.totalHits,a.state.imgLength),1!==a.state.pageNumber&&a.pageDown()})).catch((function(t){console.log(t),a.setState({images:[],totalHits:null,error:!0,imgLength:null}),a.props.totalHits(a.state.totalHits)})).finally((function(){a.setState({loading:!1}),a.props.loading(a.state.loading)}))}}},{key:"render",value:function(){var t=this;return this.state.error?Object(g.jsx)("h2",{className:"title",children:" Something goes wrong ... "}):0!==this.state.totalHits?this.state.images.map((function(e){return Object(g.jsx)("li",{className:"ImageGalleryItem",children:Object(g.jsx)("img",{onClick:t.props.onClick,src:e.webformatURL,"data-src":e.largeImageURL,alt:e.tags,className:"ImageGalleryItem-image"})},e.id)})):Object(g.jsx)("h2",{className:"title",children:" No match found ..."})}}]),a}(o.Component),j=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(){return Object(i.a)(this,a),e.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(g.jsx)("ul",{className:"ImageGallery",children:Object(g.jsx)(b,{querry:this.props.querry,page:this.props.page,totalHits:this.props.totalHits,onClick:this.props.onClick,loading:this.props.loading})})}}]),a}(o.Component),f=document.querySelector("#modal-root"),O=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(i.a)(this,a);for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))).idEscapeEvent=function(e){"Escape"===e.code&&t.props.onToggleModal()},t.onBackdropClick=function(e){e.currentTarget===e.target&&t.props.onToggleModal()},t}return Object(c.a)(a,[{key:"componentDidMount",value:function(){console.log("Modal componentDidMount"),window.addEventListener("keydown",this.idEscapeEvent)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.idEscapeEvent)}},{key:"render",value:function(){return Object(r.createPortal)(Object(g.jsx)("div",{className:"Overlay",onClick:this.onBackdropClick,children:Object(g.jsx)("div",{className:"Modal",children:this.props.children})}),f)}}]),a}(o.Component),y=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(){return Object(i.a)(this,a),e.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(g.jsx)("button",{className:"Button",onClick:this.props.onLoadMore,children:"Load more"})}}]),a}(o.Component),v=a(11),S=a.n(v),k=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(i.a)(this,a);for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))).state={querry:"",showModal:!1,largeImg:null,totalHits:null,page:1,loading:!1,imgLength:null},t.toggleModal=function(){t.setState((function(t){return{showModal:!t.showModal}}))},t.onImageClick=function(e){(e.target="IMG")&&t.toggleModal(),console.dir(e.currentTarget.dataset.src),t.setState({largeImg:e.currentTarget.dataset.src})},t.onSearchSubmit=function(e){console.log(e),t.setState({querry:e,page:1})},t.totalHits=function(e,a){0===e?t.setState({totalHits:null}):t.setState({totalHits:e,imgLength:a})},t.onLoadMore=function(){console.log("\u043a\u043b\u0438\u043a\u043d\u0443\u043b\u0438 \u043d\u0430 onLoadMore"),t.setState((function(t){return{page:t.page+1}}))},t.onLoading=function(){t.setState({loading:!t.state.loading})},t.onError=function(){t.setState({})},t}return Object(c.a)(a,[{key:"render",value:function(){return Object(g.jsxs)("div",{className:"section",children:[Object(g.jsx)(d,{onSubmit:this.onSearchSubmit}),this.state.loading&&Object(g.jsx)(S.a,{type:"Bars",className:"spinner",color:"#00BFFF",height:50,width:50}),Object(g.jsx)(j,{querry:this.state.querry,page:this.state.page,totalHits:this.totalHits,onClick:this.onImageClick,loading:this.onLoading}),(this.state.totalHits,this.state.totalHits>this.state.imgLength&&Object(g.jsx)(y,{onLoadMore:this.onLoadMore})),this.state.showModal&&Object(g.jsxs)(O,{onToggleModal:this.toggleModal,children:[Object(g.jsx)("img",{src:this.state.largeImg,alt:this.state.querry}),Object(g.jsx)("button",{className:"closeBtn",type:"button",onClick:this.toggleModal,children:"X"})]}),Object(g.jsx)(h.a,{position:"top-center",autoClose:1e3})]})}}]),a}(o.Component),x=k;s.a.render(Object(g.jsx)(n.a.StrictMode,{children:Object(g.jsx)(x,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.111aecbf.chunk.js.map